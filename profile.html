<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Профіль</title>
    <link rel="stylesheet" href="./style.css" />
    <script type="module" src="./main.js"></script>
    <script type="module" src="./supabase.js"></script>

    <style>
      /* гарне вирівнювання форми */
      .profile-edit-form {
        max-width: 420px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .profile-edit-form label {
        display: flex;
        flex-direction: column;
        font-size: 18px;
        font-weight: 500;
      }

      .profile-edit-form input {
        margin-top: 6px;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #bbb;
        font-size: 16px;
      }

      .profile-save-btn {
        margin-top: 10px;
        padding: 12px;
        font-size: 18px;
      }

      #editProfileMsg {
        margin-top: 15px;
        text-align: center;
        display: none;
        padding: 12px;
        border-radius: 10px;
        font-size: 18px;
      }
    </style>
  </head>

  <body data-page="profile">
    <div class="page-wrapper">
      <header>
        <div class="container nav">
          <h1 class="logo"></h1>
          <button class="burger" onclick="toggleMenu()">Меню</button>
          <nav id="main-nav">
            <a href="./index.html">Головна</a>
            <a href="./subjects.html">Уроки</a>
            <a href="./profile.html">Профіль</a>
            <a href="https://t.me/cros_21">Підтримка</a>
            <a id="nav-admin" href="./admin.html" style="display: none"
              >Адмін</a
            >
            <a id="auth-link" href="auth.html">Увійти</a>
          </nav>
        </div>
      </header>

      <main class="container">
        <!-- Блок із даними -->
        <section class="intro">
          <h2>Профіль</h2>
          <div id="profileCard"></div>
        </section>

        <!-- Форма редагування -->
        <section class="intro">
          <button
            id="openEditProfile"
            class="btn-save"
            style="margin-bottom: 20px"
          >
            Редагувати профіль
          </button>
        </section>

        <section class="intro" id="editProfileSection" style="display: none">
          <h2 style="text-align: center; margin-bottom: 20px">
            Редагувати профіль
          </h2>

          <form id="editProfileForm" class="profile-edit-form">
            <label>
              Ім’я користувача:
              <input type="text" id="editUsername" />
            </label>

            <label>
              Клас (наприклад 5-А):
              <input type="text" id="editClass" />
            </label>

            <button type="submit" class="btn-save profile-save-btn">
              Зберегти зміни
            </button>

            <div id="editProfileMsg" class="profile-msg"></div>

            <button
              id="closeEditProfile"
              type="button"
              class="btn-save"
              style="margin-top: 10px; background: #888"
            >
              Сховати
            </button>
          </form>
        </section>

        <!-- Результати тестів -->
        <section class="intro">
          <h3>Мої результати</h3>
          <ul id="myResults" class="list"></ul>
        </section>
        <section class="intro">
          <h3>Мої бейджі</h3>
          <div id="myBadges" class="badge-list"></div>
        </section>
      </main>

      <footer>
        <p>Автор: Сергійчук Ярослав, група ПОм-21.</p>
        <p>
          Виникли проблеми?
          <a href="https://t.me/cros_21" target="_blank">Telegram</a>
        </p>
      </footer>
    </div>
  </body>
</html>
